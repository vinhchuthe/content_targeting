// ------ particlesJS --------
particlesJS('particles-js1',
    {
        "particles": {
            "number": {
                "value": 4,
                "density": {
                    "enable": true,
                    "value_area": 800
                }
            },
            "color": {
                "value": ["#BD10E0", "#B8E986", "#50E3C2", "#FFD300", "#E86363"]
            },
            "shape": {
                "type": "edge",
                "stroke": {
                    "width": 0,
                    "color": "#000"
                },
                "polygon": {
                    "nb_sides": 6
                },
                "image": {
                    "src": "img/github.svg",
                    "width": 100,
                    "height": 100
                }
            },
            "opacity": {
                "value": 1,
                "random": false,
                "anim": {
                    "enable": false,
                    "speed": 1,
                    "opacity_min": 0.1,
                    "sync": false
                }
            },
            "size": {
                "value": 6,
                "random": false,
                "anim": {
                    "enable": true,
                    "speed": 10,
                    "size_min": 40,
                    "sync": false
                }
            },
            "line_linked": {
                "enable": false,
                "distance": 200,
                "color": "#ffffff",
                "opacity": 1,
                "width": 2
            },
            "move": {
                "enable": true,
                "speed": 5,
                "direction": "top",
                "random": false,
                "straight": false,
                "out_mode": "out",
                "bounce": false,
                "attract": {
                    "enable": false,
                    "rotateX": 600,
                    "rotateY": 1200
                }
            }
        },
        "interactivity": {
            "detect_on": "canvas",
            "events": {
                "onhover": {
                    "enable": false,
                    "mode": "bubble"
                },
                "onclick": {
                    "enable": false,
                    "mode": "push"
                },
                "resize": true
            },
            "modes": {
                "grab": {
                    "distance": 400,
                    "line_linked": {
                        "opacity": 1
                    }
                },
                "bubble": {
                    "distance": 400,
                    "size": 40,
                    "duration": 2,
                    "opacity": 8,
                    "speed": 3
                },
                "repulse": {
                    "distance": 200,
                    "duration": 0.4
                },
                "push": {
                    "particles_nb": 4
                },
                "remove": {
                    "particles_nb": 2
                }
            }
        },
        "retina_detect": true
    }
);

particlesJS('particles-js2',
    {
        "particles": {
            "number": {
                "value": 6,
                "density": {
                    "enable": true,
                    "value_area": 800
                }
            },
            "color": {
                "value": ["#BD10E0", "#B8E986", "#50E3C2", "#FFD300", "#E86363"]
            },
            "shape": {
                "type": "triangle",
                "stroke": {
                    "width": 0,
                    "color": "#000"
                },
                "polygon": {
                    "nb_sides": 6
                },
                "image": {
                    "src": "img/github.svg",
                    "width": 100,
                    "height": 100
                }
            },
            "opacity": {
                "value": 1,
                "random": true,
                "anim": {
                    "enable": false,
                    "speed": 1,
                    "opacity_min": 0.1,
                    "sync": false
                }
            },
            "size": {
                "value": 7,
                "random": false,
                "anim": {
                    "enable": true,
                    "speed": 10,
                    "size_min": 40,
                    "sync": false
                }
            },
            "line_linked": {
                "enable": false,
                "distance": 200,
                "color": "#ffffff",
                "opacity": 1,
                "width": 2
            },
            "move": {
                "enable": true,
                "speed": 5,
                "direction": "top",
                "random": true,
                "straight": false,
                "out_mode": "out",
                "bounce": false,
                "attract": {
                    "enable": false,
                    "rotateX": 600,
                    "rotateY": 1200
                }
            }
        },
        "interactivity": {
            "detect_on": "canvas",
            "events": {
                "onhover": {
                    "enable": false,
                    "mode": "bubble"
                },
                "onclick": {
                    "enable": false,
                    "mode": "push"
                },
                "resize": true
            },
            "modes": {
                "grab": {
                    "distance": 400,
                    "line_linked": {
                        "opacity": 1
                    }
                },
                "bubble": {
                    "distance": 400,
                    "size": 40,
                    "duration": 2,
                    "opacity": 8,
                    "speed": 3
                },
                "repulse": {
                    "distance": 200,
                    "duration": 0.4
                },
                "push": {
                    "particles_nb": 4
                },
                "remove": {
                    "particles_nb": 2
                }
            }
        },
        "retina_detect": true
    }
);

particlesJS('particles-js3',
    {
        "particles": {
            "number": {
                "value": 10,
                "density": {
                    "enable": true,
                    "value_area": 800
                }
            },
            "color": {
                "value": "#1b1e34"
            },
            "shape": {
                "type": "image",
                "stroke": {
                    "width": 0,
                    "color": "#000"
                },
                "polygon": {
                    "nb_sides": 6
                },
                "image": {
                    "src": "assets/img/icon/stroke.png",
                    "width": 30,
                    "height": 30
                }
            },
            "opacity": {
                "value": 1,
                "random": true,
                "anim": {
                    "enable": false,
                    "speed": 1,
                    "opacity_min": 0.1,
                    "sync": false
                }
            },
            "size": {
                "value": 10,
                "random": false,
                "anim": {
                    "enable": true,
                    "speed": 10,
                    "size_min": 40,
                    "sync": false
                }
            },
            "line_linked": {
                "enable": false,
                "distance": 200,
                "color": "#ffffff",
                "opacity": 1,
                "width": 2
            },
            "move": {
                "enable": true,
                "speed": 8,
                "direction": "top-right",
                "random": true,
                "straight": false,
                "out_mode": "out",
                "bounce": false,
                "attract": {
                    "enable": false,
                    "rotateX": 600,
                    "rotateY": 1200
                }
            }
        },
        "interactivity": {
            "detect_on": "canvas",
            "events": {
                "onhover": {
                    "enable": false,
                    "mode": "grab"
                },
                "onclick": {
                    "enable": false,
                    "mode": "push"
                },
                "resize": true
            },
            "modes": {
                "grab": {
                    "distance": 400,
                    "line_linked": {
                        "opacity": 1
                    }
                },
                "bubble": {
                    "distance": 400,
                    "size": 40,
                    "duration": 2,
                    "opacity": 8,
                    "speed": 3
                },
                "repulse": {
                    "distance": 200,
                    "duration": 0.4
                },
                "push": {
                    "particles_nb": 4
                },
                "remove": {
                    "particles_nb": 2
                }
            }
        },
        "retina_detect": true
    }
);

particlesJS('particles-js4',
    {
        "particles": {
            "number": {
                "value": 6,
                "density": {
                    "enable": true,
                    "value_area": 800
                }
            },
            "color": {
                "value": ["#BD10E0", "#B8E986", "#50E3C2", "#FFD300", "#E86363"]
            },
            "shape": {
                "type": "circle",
                "stroke": {
                    "width": 0,
                    "color": "#000"
                },
                "polygon": {
                    "nb_sides": 6
                },
                "image": {
                    "src": "img/github.svg",
                    "width": 100,
                    "height": 100
                }
            },
            "opacity": {
                "value": 1,
                "random": false,
                "anim": {
                    "enable": false,
                    "speed": 1,
                    "opacity_min": 0.1,
                    "sync": false
                }
            },
            "size": {
                "value": 7,
                "random": false,
                "anim": {
                    "enable": true,
                    "speed": 10,
                    "size_min": 40,
                    "sync": false
                }
            },
            "line_linked": {
                "enable": false,
                "distance": 200,
                "color": "#ffffff",
                "opacity": 1,
                "width": 2
            },
            "move": {
                "enable": true,
                "speed": 8,
                "direction": "top",
                "random": true,
                "straight": false,
                "out_mode": "out",
                "bounce": false,
                "attract": {
                    "enable": false,
                    "rotateX": 600,
                    "rotateY": 1200
                }
            }
        },
        "interactivity": {
            "detect_on": "canvas",
            "events": {
                "onhover": {
                    "enable": false,
                    "mode": "grab"
                },
                "onclick": {
                    "enable": false,
                    "mode": "push"
                },
                "resize": true
            },
            "modes": {
                "grab": {
                    "distance": 400,
                    "line_linked": {
                        "opacity": 1
                    }
                },
                "bubble": {
                    "distance": 400,
                    "size": 40,
                    "duration": 2,
                    "opacity": 8,
                    "speed": 3
                },
                "repulse": {
                    "distance": 200,
                    "duration": 0.4
                },
                "push": {
                    "particles_nb": 4
                },
                "remove": {
                    "particles_nb": 2
                }
            }
        },
        "retina_detect": true
    }
);

// ------------- NiceScroll -----------------
$("body").niceScroll({
    cursorcolor: '#2128bd',
    scrollspeed: '80',
    mousescrollstep: 20,
});
$(window).on("load", function () {
    var width = $(window).width();
    if (width <= 767) {
        $("body").getNiceScroll().remove();

        // Scroll section
        controller.destroy(true);
        blockScroll.destroy(true);
    }
});

// -------------- Popup ----------------------

// Open Popup
$(".chart-box").click(function () {
    var popup_id = $(this).attr("data-id");
    $("#" + popup_id).addClass("active");
    $("#dialog").addClass("active");
    // disable page scroll
    $('body').on('wheel.modal mousewheel.modal', function () {
        return false;
    })
});

// Close Popup
$(".popup-close").click(function () {
    $("#dialog").removeClass("active");
    $(".popup-box").removeClass("active");
    // enable page scroll
    $('body').off('wheel.modal mousewheel.modal');
})

// -------------- Profile ----------------------

// Range Slider
var valMap = ["2.5k", "5k", "10k", "15k", "20k"];
var rng = document.getElementById("rng");
var ro = document.getElementById("tip");
var tooltip = document.getElementById("tooltip");
var prefs = ['webkit-slider-runnable-track', 'moz-range-track', 'ms-track'];


function updateRange() {
    ro.textContent = valMap[parseInt(rng.value, 10)];
    // console.log("Selected value is: " + valMap[parseInt(rng.value, 10)] + ", Associated value is: " + rng.value);
}

function setBubble(range, bubble) {
    const val = range.value;
    const min = range.min ? range.min : 0;
    const max = range.max ? range.max : 100;
    const newVal = Number(((val - min) * 100) / (max - min));
    // bubble.innerHTML = val;

    // Sorta magic numbers based on size of the native UI thumb
    bubble.style.left = `calc(${newVal}% + (${8 - newVal * 0.15}px))`;
}


window.addEventListener("DOMContentLoaded", updateRange);
rng.addEventListener("input", updateRange);
rng.addEventListener("input", () => {
    setBubble(rng, tooltip);
});
rng.addEventListener("input", () => {
    var bval = parseInt(rng.value, 10);
    var pos = (bval - rng.getAttribute('min')) / (rng.getAttribute('max') - rng.getAttribute('min'));
    pos = Math.round(pos * 99);
    var grad = 'linear-gradient(90deg, #FFEB3B ' + pos + '%,#929496 ' + (pos + 1) + '%)';
    rng.style.background = grad;
})

// Tab
$(".pricePlan--header-title").click(function () {
    var tab = $(this).attr("title-id");
    $(".pricePlan--header-title").removeClass("header-active");
    $(this).addClass("header-active");
    $(".tab-content").removeClass("tab-active");
    $("#" + tab).addClass("tab-active");
});

// ------------------ Scroll ---------------------
var controller = new ScrollMagic.Controller();

var wipe = new TimelineMax().fromTo("#scroll .content-scroll-body", 1, { x: 0 }, { x: "-100%", ease: Linear.easeNone });


var blockScroll = new ScrollMagic.Scene({
    triggerElement: "#scroll",
    duration: "100%",
    triggerHook: "onLeave",
})
    .setPin("#scroll")
    .setTween(wipe)
    .addTo(controller);

// Cursor
const link = document.querySelectorAll('.content-scroll-body > .scroll-body-item');
const cursor = document.getElementById('scrollTip');

const editCursor = e => {
    const { clientX: x, clientY: y } = e;
    cursor.style.left = x + 'px';
    cursor.style.top = y + 'px';
};

link.forEach(b => b.addEventListener('mouseenter', function (e) {
    const img_link = b.getAttribute("hover-img");
    cursor.style.backgroundImage = "url(" + "'" + img_link + "'" + ")";
}));
link.forEach(b => b.addEventListener('mouseleave', function (e) {
    cursor.style.backgroundImage = "url()";
}));
window.addEventListener('mousemove', editCursor);


// ------------------- banner ---------------------

var circle = $(".header-shape-item");

function moveCircle(e) {
    TweenMax.staggerTo(circle, 0.5, {
        css: {
            left: e.pageX,
            top: e.pageY - 250
        }
    }, 0.1);
}

$("#banner").on('mousemove', moveCircle);


// ------------------- feature ----------------------
$(".grid-list-item").on("mouseenter", function () {
    $(".grid-list-item").removeClass("item-active");
    $(this).addClass("item-active");
    var feature_img = $(this).attr("data-id");
    // console.log(feature_img);
    $(".grid-img").removeClass("img-active");
    $("#" + feature_img).addClass("img-active");
});


// ----------------------- Menu -----------------------
$(".navbar-item-link").click(function () {
    $(".sub-menu").toggleClass("active");
});

var nav_link = $(".sub-menu-item-link");
$(".sub-menu-item-link").on("click", function () {
    var href = $(this).attr("href");
    topY = $(href).offset().top;
    if ($(".sub-menu").hasClass("active")) {
        $(".sub-menu").removeClass("active");
    }

    TweenMax.to($(window), 1, {
        scrollTo: {
            y: topY,
            autoKill: true
        },
        ease: Power3.easeOut
    })

    return false;
});

